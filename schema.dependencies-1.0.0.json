{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "description": "BSH firmware dependecy meta-data",
  "$id": "https://scr.bsh-sdd.com/projects/HC/repos/architecture/raw/schemas/firmware-module/dependencies.json/schema.dependencies-1.0.0.json",
  "$comment": "All instance ident.json files must refer to this schema via $schema: ./schema.dependencies-1.0.0.json",
  "definitions": {
    "uint16_t": {
      "type": "integer",
      "description": "Unsigned 16 bit wide integer.",
      "minimum": 0,
      "maximum": 65535
    },
    "uint32_t": {
      "type": "integer",
      "description": "Unsigned 32 bit wide integer.",
      "minimum": 0,
      "maximum": 4294967295
    },
    "uint64_t": {
      "type": "integer",
      "description": "Unsigned 64 bit wide integer.",
      "minimum": 0,
      "maximum": 18446744073709552000
    },
    "dependency": {
      "type": "object",
      "properties": {
        "uid": {
          "type": "integer",
          "$ref": "#/definitions/uint64_t"
        },
        "rel": {
          "type": "string",
          "enum": [
            "<",
            ">",
            "<=",
            ">=",
            "=",
            "!="
          ]
        },
        "version": {
          "type": "object",
          "properties": {
            "major": {
              "description": "The major version number - increase when breaking backwards compatibility.",
              "$ref": "#/definitions/uint16_t"
            },
            "minor": {
              "description": "The minor version number - increase for new, backwards compatible features.",
              "$ref": "#/definitions/uint16_t"
            },
            "revision": {
              "description": "The revision number - increase for backwards compatible bugfixes.",
              "$ref": "#/definitions/uint16_t"
            },
            "build": {
              "description": "The build number.",
              "$ref": "#/definitions/uint32_t"
            }
          },
          "required": [
            "major",
            "minor",
            "revision",
            "build"
          ]
        }
      },
      "required": [
        "uid",
        "rel",
        "version"
      ],
      "additionalProperties": false
    },
    "children": {
      "type": "array",
      "items": {
        "anyOf": [
          {
            "type": "object",
            "properties": {
              "dependency": {
                "$ref": "#/definitions/dependency"
              }
            },
            "required": [
              "dependency"
            ],
            "additionalProperties": false
          },
          {
            "type": "object",
            "properties": {
              "and": {
                "$ref": "#/definitions/and"
              }
            },
            "required": [
              "and"
            ],
            "additionalProperties": false
          },
          {
            "type": "object",
            "properties": {
              "or": {
                "$ref": "#/definitions/or"
              }
            },
            "required": [
              "or"
            ],
            "additionalProperties": false
          },
          {
            "type": "object",
            "properties": {
              "xor": {
                "$ref": "#/definitions/xor"
              }
            },
            "required": [
              "xor"
            ],
            "additionalProperties": false
          },
          {
            "type": "object",
            "properties": {
              "not": {
                "$ref": "#/definitions/not"
              }
            },
            "required": [
              "not"
            ],
            "additionalProperties": false
          }
        ]
      },
      "additionalItems": false
    },
    "and": {
      "type": "object",
      "properties": {
        "children": {
          "$ref": "#/definitions/children"
        }
      },
      "required": [
        "children"
      ],
      "additionalProperties": false
    },
    "or": {
      "type": "object",
      "properties": {
        "children": {
          "$ref": "#/definitions/children"
        }
      },
      "additionalProperties": false
    },
    "xor": {
      "type": "object",
      "properties": {
        "children": {
          "$ref": "#/definitions/children"
        }
      },
      "additionalProperties": false
    },
    "not": {
      "type": "object",
      "properties": {
        "children": {
          "$ref": "#/definitions/children"
        }
      },
      "additionalProperties": false
    }
  },
  "properties": {
    "dependencies": {
      "type": "object",
      "properties": {
        "and": {
          "$ref": "#/definitions/and"
        },
        "or": {
          "$ref": "#/definitions/or"
        },
        "dependency": {
          "$ref": "#/definitions/dependency"
        }
      },
      "anyOf": [
        {
          "required": [
            "dependency"
          ]
        },
        {
          "required": [
            "and"
          ]
        },
        {
          "required": [
            "or"
          ]
        }
      ],
      "additionalProperties": false
    }
  },
  "required": [
    "dependencies"
  ]
}